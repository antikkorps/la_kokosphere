<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Manager</title>
    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
  </head>
  <body>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <script>
      // Configuration Auth0
      const auth0 = await createAuth0Client({
        domain: 'dev-xmogyv0r3a8jmews.eu.auth0.com', // Sera remplacé par la variable d'environnement
        client_id: 'Q1PWj5OIU0OTl2uh7Zkt7rkoVbtDgHNS', // Sera remplacé par la variable d'environnement
        authorizationParams: {
          redirect_uri: window.location.origin + '/admin'
        }
      });

      // Gestion de l'authentification
      if (await auth0.isAuthenticated()) {
        // Utilisateur connecté
        console.log('Authenticated');
      } else {
        // Rediriger vers la page de connexion
        await auth0.loginWithRedirect();
      }
    </script>
  </body>
</html>
